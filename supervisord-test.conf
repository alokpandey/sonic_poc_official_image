[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid

[unix_http_server]
file=/var/run/supervisor.sock
chmod=0700

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock

# Test API Server
[program:test-api]
command=python3 /app/tests/test_api.py
directory=/app
user=sonic-test
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/test-api.err.log
stdout_logfile=/var/log/supervisor/test-api.out.log
environment=PYTHONPATH="/app/tests:/app/validation"

# BSP Test Runner
[program:bsp-test-runner]
command=python3 /app/tests/bsp_test_runner.py
directory=/app
user=sonic-test
autostart=false
autorestart=false
stderr_logfile=/var/log/supervisor/bsp-test-runner.err.log
stdout_logfile=/var/log/supervisor/bsp-test-runner.out.log
environment=PYTHONPATH="/app/tests:/app/validation"

# SAI Test Runner
[program:sai-test-runner]
command=python3 /app/tests/sai_test_runner.py
directory=/app
user=sonic-test
autostart=false
autorestart=false
stderr_logfile=/var/log/supervisor/sai-test-runner.err.log
stdout_logfile=/var/log/supervisor/sai-test-runner.out.log
environment=PYTHONPATH="/app/tests:/app/validation"

# Traffic Generator
[program:traffic-generator]
command=python3 /app/tests/traffic_generator.py
directory=/app
user=sonic-test
autostart=false
autorestart=false
stderr_logfile=/var/log/supervisor/traffic-generator.err.log
stdout_logfile=/var/log/supervisor/traffic-generator.out.log
environment=PYTHONPATH="/app/tests:/app/validation"

# Validation Service
[program:validation-service]
command=python3 /app/validation/validation_service.py
directory=/app
user=sonic-test
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/validation-service.err.log
stdout_logfile=/var/log/supervisor/validation-service.out.log
environment=PYTHONPATH="/app/tests:/app/validation"
